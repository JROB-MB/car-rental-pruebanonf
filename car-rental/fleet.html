<!DOCTYPE html>
<html >
<head>

     <title>fleet</title>

     <script src="min.js"></script>

     <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>



     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=Edge">
     <meta name="description" content="">
     <meta name="keywords" content="">
     <meta name="author" content="">
     <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

     <link rel="stylesheet" href="css/bootstrap.min.css">
     <link rel="stylesheet" href="css/font-awesome.min.css">
     <link rel="stylesheet" href="css/owl.carousel.css">
     <link rel="stylesheet" href="css/owl.theme.default.min.css">

     <!-- MAIN CSS -->
     <link rel="stylesheet" href="css/style.css">

</head>
<body id="top" data-spy="scroll" data-target=".navbar-collapse" data-offset="50">

     <!-- PRE LOADER -->
     <!-- <section class="preloader">
          <div class="spinner">
               <span class="spinner-rotate"></span>
          </div>
     </section> -->


     <!-- MENU -->
     <section class="navbar custom-navbar navbar-fixed-top" role="navigation">
          <div class="container">

               <div class="navbar-header">
                    <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                         <span class="icon icon-bar"></span>
                         <span class="icon icon-bar"></span>
                         <span class="icon icon-bar"></span>
                    </button>

                    <!-- lOGO TEXT HERE -->
                    <a href="#" class="navbar-brand">Car Rental Website</a>
               </div>

               <!-- MENU LINKS -->
               <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-nav-first">
                         <li ><a href="index.php">Home</a></li>
                         <li><a href="fleet.php">Fleet</a></li>
                         <li><a href="offers.html">Offers</a></li>
                         <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"></span></a>
                              
                              <ul class="dropdown-menu">
                                   <li><a href="blog-posts.html">Blog</a></li>
                                   <li><a href="about-us.html">About Us</a></li>
                                   <li><a href="team.html">Team</a></li>
                                   <li><a href="testimonials.html">Testimonials</a></li>
                                   <li><a href="terms.html">Terms</a></li>
                              </ul>
                         </li>
                         <li><a href="contact.php">Contact Us</a></li>
                         <li><a href="indexlog.html">Log in</a></li>
                    </ul>
               </div>

          </div>
     </section>

<section>
        <div class="container mt-5">
            <div class="row" id="card-container">
                <h1>Fleet</h1>
                <br>
                <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illo, alias.</p>
            </div>
        </div>
    </section>
    <div class="container mt-5">
    <table class="table">
        <thead>
            <tr>
                <th>id_fleet</th>
                <th>image_fleet</th>
                <th>passegengers</th>
                <th>luggages</th>
                <th>doors</th>
                <th>transmission</th>
                <th>carName</th>
                <th>priceFleet</th>
                <th>description</th>
            </tr>
        </thead>
        <tbody id="tabla-body">
            <!-- Los resultados de la API se mostrarán aquí -->
        </tbody>
    </table>
</div>

<script>
    // Realizar la solicitud GET a la API en PHP
    fetch('method.php')
        .then(response => response.json())
        .then(data => {
            const cardContainer = document.getElementById('card-container');
            data.forEach(item => {
                const cardCol = document.createElement('div');
                cardCol.className = 'col-md-4 col-sm-4';

                const card = document.createElement('div');
                card.className = 'courses-thumb courses-thumb-secondary';

                card.innerHTML = `
                    <div class="courses-top">
                        <div class="courses-image">
                            <img src="images/${item.image_fleet}" class="img-responsive" alt="">
                        </div>
                        <div class="courses-date">
                            <span title="passegengers"><i class="fa fa-user"></i> ${item.passegengers}</span>
                            <span title="luggages"><i class="fa fa-briefcase"></i> ${item.luggages}</span>
                            <span title="doors"><i class="fa fa-sign-out"></i> ${item.doors}</span>
                            <span title="transmission"><i class="fa fa-cog"></i> ${item.transmission}</span>
                        </div>
                    </div>
                    <div class="courses-detail">
                        <h3><a href="fleet.html?id=${item.id_fleet}">${item.carName}</a></h3>
                        <p class="lead"><small>from</small> <strong>$${item.priceFleet}</strong> <small>per weekend</small></p>
                        <p>${item.description}</p>
                    </div>
                    <div class="courses-info">
                        <button type="button" data-toggle="modal" data-target=".bs-example-modal" class="section-btn btn btn-primary btn-block">Book Now</button>
                    </div>
                `;

                cardCol.appendChild(card);
                cardContainer.appendChild(cardCol);
            });
        })
        .catch(error => console.error('Error:', error));
</script>


    <div class="modal fade bs-example-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="gridSystemModalLabel">Book Now</h4>
            </div>

            <div class="modal-body">
                <form method="post" id="contact-form">
                    <div class="row">
                        <div class="col-md-6">
                            <input type="text" class="form-control" name="pickup_location" placeholder="Pick-up location" required>
                        </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control" name="return_location" placeholder="Return location" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <input type="date" class="form-control" name="pickup_datetime" placeholder="Pick-up date/time" required>
                        </div>
                        <div class="col-md-6">
                            <input type="date" class="form-control" name="return_datetime" placeholder="Return date/time" required>
                        </div>
                    </div>
                    <input type="text" class="form-control" name="full_name" placeholder="Enter full name" required>
                    <div class="row">
                        <div class="col-md-6">
                            <input type="email" class="form-control" name="email" id="email" placeholder="Enter email address" required>
                        </div>
                        <div class="col-md-6">
                            <input type="tel" class="form-control" name="phone" id="phone" placeholder="Enter phone" required>
                        </div>
                    </div>
                </form>
                <script>
                    function enviarDatos() {
                        var formulario = document.getElementById("contact-form");
                        var datos = new FormData(formulario);
        
                        fetch("method.php", {
                            method: "POST",
                            body: datos
                        })
                        .then(response => response.text())
                        .then(data => {
                            alert(data); 
                            // Recarga la página después de mostrar el mensaje emergente
                            window.location.reload();// Muestra la respuesta del servidor en una ventana de alerta
                        })
                        .catch(error => {
                            console.error("Error:", error);
                        });
                    }
            </script>
            <script>
                const formulario1 = document.getElementById('updateForm');
const resultadoDiv = document.getElementById('result');

formulario1.addEventListener('submit', function (event) {
    event.preventDefault();

    const id = formulario1.elements.id.value;
    const pickup_location = formulario1.elements.pickup_location.value;
    const return_location = formulario1.elements.return_location.value;
    const full_name = formulario1.elements.full_name.value;
    const email = formulario1.elements.email.value;
    const phone = formulario1.elements.phone.value;

    fetch('method.php', {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: `id=${id}&pickup_location=${pickup_location}&return_location=${return_location}&full_name=${full_name}&email=${email}&phone=${phone}`
    })
    .then(response => response.text())
    .then(data => {
        resultadoDiv.textContent = data;
        formulario1.reset();
    })
    .catch(error => console.error('Error:', error));
});

            </script>
            </div>

            <div class="modal-footer">
                <button type="button" class="section-btn btn btn-primary" id="book-now-button" onclick="enviarDatos()">Book Now</button>
            </div>
            <div id="success-message" class="alert alert-success" style="display: none;">
    Booking successful! Thank you for choosing our fleet.
</div>




            <!-- Incluye jQuery para el manejo del clic del botón -->
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script>
                $(document).ready(function() {
                    $('#book-now-button').click(function() {
                        // Validación de correo electrónico
                        var email = $('#email').val();
                        if (!validateEmail(email)) {
                            alert('Por favor, ingrese una dirección de correo electrónico válida.');
                            return false;
                        }

                        // Validación de número de teléfono
                        var phone = $('#phone').val();
                        if (!/^[0-9]+$/.test(phone)) {
                            alert('El número de teléfono debe contener solo números.');
                            return false;
                        }

                        // Envía el formulario si las validaciones pasan
                        $('#contact-form').submit();
                    });

                    function validateEmail(email) {
                        var re = /\S+@\S+\.\S+/;
                        return re.test(email);
                    }

                    $(document).ready(function() {
    $('#book-now-button').click(function() {
        // Perform your form validations here

        // Assuming insertionSuccessful is a variable indicating a successful booking
        var insertionSuccessful = true;

        if (insertionSuccessful) {
            // Display the success message
            $('#success-message').show();
        }
        
        // Prevent the default form submission behavior
        return false;
    });
});
                });
            </script>
        </div>
    </div>
</div>

<footer id="footer">
    <div class="container">
         <div class="row">

              <div class="col-md-4 col-sm-6">
                   <div class="footer-info">
                        <div class="section-title">
                             <h2>Headquarter</h2>
                        </div>
                        <address>
                             <p>212 Barrington Court <br>New York, ABC 10001</p>
                        </address>

                        <ul class="social-icon">
                             <li><a href="#" class="fa fa-facebook-square" attr="facebook icon"></a></li>
                             <li><a href="#" class="fa fa-twitter"></a></li>
                             <li><a href="#" class="fa fa-instagram"></a></li>
                        </ul>

                        <div class="copyright-text"> 
                             <p>Copyright &copy; 2020 Company Name</p>
                           
                        </div>
                   </div>
              </div>

              <div class="col-md-4 col-sm-6">
                   <div class="footer-info">
                        <div class="section-title">
                             <h2>Contact Info</h2>
                        </div>
                        <address>
                             <p>+1 333 4040 5566</p>
                             <p><a href="mailto:contact@company.com">contact@company.com</a></p>
                        </address>

                        <div class="footer_menu">
                             <h2>Quick Links</h2>
                             <ul>
                                  <li><a href="index.php">Home</a></li>
                                  <li><a href="about-us.html">About Us</a></li>
                                  <li><a href="terms.html">Terms & Conditions</a></li>
                                  <li><a href="contact.php">Contact Us</a></li>
                             </ul>
                        </div>
                   </div>
              </div>

              <div class="col-md-4 col-sm-12">
                   <div class="footer-info newsletter-form">
                        <div class="section-title">
                             <h2>Newsletter Signup</h2>
                        </div>
                        <div>
                             <div class="form-group">
                                  <form action="#" method="get">
                                       <input type="email" class="form-control" placeholder="Enter your email" name="email" id="email" required>
                                       <input type="submit" class="form-control" name="submit" id="form-submit" value="Send me">
                                  </form>
                                  <span><sup>*</sup> Please note - we do not spam your email.</span>
                             </div>
                        </div>
                   </div>
              </div>
              
         </div>
    </div>
</footer>

<!-- SCRIPTS -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/smoothscroll.js"></script>
<script src="js/custom.js"></script>

</body>
</html>
